| Learner personas | - [code contributor](../README.md#code-contributor-)<br> - [code-adjacent contributor](../README.md#code-adjacent-contributor-)<br> - [manager/stakeholder](../README.md#managerstakeholder-) |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Pre-requisites   | - [Module 01: Introduction to Open Source](../01-intro-to-os/) <br>- [Module 02: Participating in Open Source](../02-participating-in-oss/)                                                   |

# Chapter 04: Effective upstream and downstream collaboration

- [Chapter 04: Effective upstream and downstream collaboration](#chapter-04-effective-upstream-and-downstream-collaboration)
  - [Learning Objectives 🧠](#learning-objectives-)
  - [Understand Upstream and Downstream Projects ↕️](#understand-upstream-and-downstream-projects-️)
  - [Why Contribute to Upstream Projects? 💭](#why-contribute-to-upstream-projects-)
  - [Upstream Engagement Strategy 🌳](#upstream-engagement-strategy-)
  - [Collaborate with Downstream Projects 🌿](#collaborate-with-downstream-projects-)
  - [🙋🏽‍♀️ Learner Question:](#️learner-question)
  - [Resources 📚](#resources-)
  - [Continue learning 🚥](#continue-learning-)

## Learning Objectives 🧠

- Understand upstream and downstream project relationships in the open source ecosystem
- Learn to identify strategic upstream and downstream projects and collaborate with them effectively

## Understand Upstream and Downstream Projects ↕️

In the open source ecosystem, the terms "upstream" and "downstream" refer to the relationship between different projects that build upon or contribute to each other. They describe the flow of code, changes, and contributions in a software ecosystem. When a project builds on a different project’s functionality, the former become downstream of the latter, as described in the following figure:

<p align="center">
  <img src="./images/oss-upstream-downstream.svg" width="50%" alt="Upstream and downstream OSS" />
</p>

Let’s consider pandas. Several PyData libraries like Dask and GeoPandas use pandas data structures (Series and DataFrame) and functions to provide more complex features, hence they are downstream of pandas. pandas itself is partially written in Python, so the CPython project is upstream of pandas. The upstream/downstream terminology is not isolated to core library features. pandas uses Sphinx to generate it’s documentation and pytest for it's test infrastructure, so these libraries are also upstream of pandas.

Related software development terms are “dependency” and “dependents” — they refer to the same relationship, but in more practical terms. A “dependency graph” is a structure used to map this relationship, where each project is a node and they are connected with directed arrows that start at the project providing features(dependents) and end in the project using the feature (dependent). The above figure depicts a dependency graph.

However, not all dependencies are upstream projects (and vice-verse for dependents and downstream projects). Dependencies can be directly mapped to the project’s codebase and include all the external tools required for the project to be developed, packaged, and executed. Upstream projects are a subset of dependencies central to the core value of your project. They are external tools that your project uses heavily and potentially extends. For an example to demonstrate the difference between upstream and dependencies, consider a project that has tests to ensure _downstream_ project stability, this makes the downstream project a dependency of your project.

> **Note**
> GitHub (and some other tools) autogenerates a list of dependencies and dependents based on the project’s packaging-related files like `environment.yml`, `requirements.txt`, `pyproject.toml`, `package-lock.json`, etc. This is useful but may not tell the full story because it doesn’t capturing the depth of the dependency tree and does not including packaging tools used to generate the graphs. Make sure to manually vet autogenerated dependency graphs.

## Why Contribute to Upstream Projects? 💭

The flow of features and contributions between projects helps keep our overall ecosystem healthy. Not only open source projects, but also corporate proprietary projects that rely on OSS, should aim to contribute back to the upstream projects for the following non-exhaustive set of reasons:

- **Good OSS Citizenship:** Collaborating with upstream projects in the ecosystem displays a good OSS partnership and improves community trust in your contributions.
- **Evaluate ideas with community experts:** Bug fix or feature implementation contributed to an upstream project (instead of fixing downstream) can be reviewed and improved by a larger community. You can also catch any unintended consequences in other parts of the upstream codebase or in other related projects by working with the community.
- **Avoid duplicated effort:** A fix or feature relevant to the upstream project, especially one that benefits more projects, may already be in development/discussion. An “upstream first” approach, where you coordinate with upstream projects before implementing your solution, will help you start or participate in community conversations early and avoid duplicating work.
- **Project stability**: Contributing relevant features upstream keeps your project clean. Your codebase will have a clear scope and you can minimize any cascading effects caused by implementing work-arounds for upstream issue.

## Upstream Engagement Strategy 🌳

## Collaborate with Downstream Projects 🌿

## 🙋🏽‍♀️ Learner Question:

## Resources 📚

- [What is an open source upstream?, Red Hat](https://www.redhat.com/en/blog/what-open-source-upstream)
- [Understanding Upstream Open Source Projects, TODO Group](https://github.com/todogroup/ospo-career-path/blob/main/OSPO-101/module6/README.md)

## Continue learning 🚥
